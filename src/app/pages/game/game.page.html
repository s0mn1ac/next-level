<ion-header *transloco="let t">

  <ion-toolbar color="primary">
    
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/library"></ion-back-button>
    </ion-buttons>

    <ion-title> {{ game?.name }} </ion-title>
    
  </ion-toolbar>

</ion-header>

<ion-content *transloco="let t">

  <div class="header-container">

    <div class="background-image-container">
      <img [src]="game?.image" [alt]="game?.name" *ngIf="isGameDataLoaded" />
    </div>

    <div class="header">

      <div class="parent-platforms">
        <img [src]="parentPlatform.image" *ngFor="let parentPlatform of game?.parentPlatforms" [alt]="parentPlatform.name" />
      </div>
    
      <ion-label class="title"> {{ game?.name }} </ion-label>

      <div class="status-bar" *ngIf="isGameDataLoaded && isStatusBarVisible">

        <div class="user-score" (click)="onClickChangeUserScore()">
          <ion-icon name="person"></ion-icon>
          <div class="score" [ngClass]="game?.score.color"> {{ game?.score.value ?? '-' }} </div>
        </div>

        <ion-fab-button size="small" color="warning">
          <ion-icon name="document-outline"></ion-icon>
        </ion-fab-button>

        <ion-fab-button size="small" [color]="game?.completed ? 'success' : 'medium'" (click)="onClickUpdateGameStatus()">
          <ion-icon name="checkmark-outline"></ion-icon>
        </ion-fab-button>
        
      </div>

    </div>

  </div>

  <div class="about-container">

    <!-- <div class="row">
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.description') }} </h3>
          <p [innerHTML]="game?.description" class="ion-text-break-spaces"></p>
        </ion-label>
      </ion-item>
    </div> -->

    <div class="row">
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.platforms') }} </h3>
          <p *ngFor="let platform of game?.platforms"> {{ platform?.name }} </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.metascore') }} </h3>
          <div class="metascore" [ngClass]="game?.metascore.color"> {{ game?.metascore.value ?? '-' }} </div>
        </ion-label>
      </ion-item>
    </div>
    
    <div class="row">
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.genres') }} </h3>
          <p *ngFor="let genre of game?.genres"> {{ genre?.name }} </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.releaseDate') }} </h3>
          <p> {{ game?.releaseDate }} </p>
        </ion-label>
      </ion-item>
    </div>

    <div class="row">
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.developer') }} </h3>
          <p *ngFor="let developer of game?.developers"> {{ developer?.name }} </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.publisher') }} </h3>
          <p *ngFor="let publisher of game?.publishers"> {{ publisher?.name }} </p>
        </ion-label>
      </ion-item>
    </div>

    <div class="row">
      <ion-item lines="none">
        <ion-label>
          <h3> {{ t('game.ageRating') }} </h3>
          <p> {{ game?.esrb?.name }} </p>
        </ion-label>
      </ion-item>
    </div>

  </div>

</ion-content>
